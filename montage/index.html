<HTML><HEAD>
<meta charset="utf-8" >
<meta name="viewport" content="width=device-width" >
<link rel="stylesheet" href="../assets/usage.css">
<TITLE>Montage -- ImageMagick Examples</TITLE>
<LINK REL="icon" HREF="../img_www/favicon.ico" type="image/x-icon">
<LINK REL="shortcut" HREF="../img_www/favicon.ico" type="image/x-icon">
<LINK REL="canonical" HREF="https://imagemagick.org/Usage/montage/">
</HEAD><body><main class="container"><div class="magick-template"><div class="magick-header">

<H1>ImageMagick Examples -- <BR>
    <IMG SRC="../img_www/space.gif" width=50 height=1>
    Montage, Arrays of Images</H1>

<div>

<DL>
<DT><B>Index</B>
<DT><A HREF="../"
    ><IMG SRC="../img_www/granitesm_left.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > ImageMagick Examples Preface and Index</A>
<DD><A HREF="#montage"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Montage, Introduction and General</A>
    <UL>
    <LI><A HREF="#geometry_size"
        > Geometry - Tile Size (Image Resize)</A>
    <LI><A HREF="#geometry_spacing"
        > Geometry - Tile Spacing</A>
    <LI><A HREF="#tile"
        > Tile Layout Controls</A>
    <LI><A HREF="#frame"
        > Frame Decoration</A>
    <LI><A HREF="#border"
        > Border Decoration</A>
    <LI><A HREF="#shadow"
        > Shadow Decoration</A>
    <LI><A HREF="#label"
        > Labeling Montage Images</A>
    <LI><A HREF="#metadata"
        >Using Saved Image MetaData</A>
    <LI><A HREF="#null"
        > Leaving Gaps in a Montage</A>
    </UL>
<DD><A HREF="#settings"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Montage Settings</A>
    <UL>
    <LI><A HREF="#color"
        > Montage Color Settings</A>
    <LI><A HREF="#controls"
        > Montage Control Settings</A>
    <LI><A HREF="#reuse"
        > Re-Using Settings for Image Read/Creation</A>
    <LI><A HREF="#diff"
        > Montage vs Magick Option Differences</A>
    </UL>
<DD><A HREF="#index"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Indexes of Image Directories</A>
    <UL>
    <LI><A HREF="#html"
        > HTML Thumbnail Image Maps</A> (basic index map)
    <LI><A HREF="#html_jpeg"
        > Smaller HTML Index Maps, using JPEG images</A>
    <LI><A HREF="#vid"
        > Visual Index</A> (A non-montage solution)
    <LI><A HREF="#polaroid"
        > A Montage of Polaroid Photos</A> (a fancy index map)
    </UL>
<DD><A HREF="#special_usage"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Special Techniques in using Monatge</A>
    <UL>
    <LI><A HREF="#columns"
        > Montage into Columns</A>
    <LI><A HREF="#overlap"
        > Overlapped Montage Tiles</A>
    <LI><A HREF="#concatenate"
        > Montage Concatenation Mode</A>
    <LI><A HREF="#zero_geometry"
        > Zero Geometry</A> (caution required)
    <LI><A HREF="#bg"
        > Background and Transparency Handling</A>
    </UL>
</DL></P>

The original use of "<code>magick montage</code>" is to generate tables of image
thumbnails, that is, to reference thumbnails of large collections of images,
especially photos.  And while it still can be used for that purpose, it can
also do a lot more. This page examines what you can do with montage, and how
you can use it on your own images.  </P>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="montage"></A>
<H2>Montage, Introduction</H2>

The "<CODE><A HREF="https://imagemagick.org/www/montage.html"
>magick montage</A></CODE>" command is designed to produce an array of thumbnail
images. Sort of like a proof sheet of a large collection of images. </P>

The default "<CODE><A HREF="https://imagemagick.org/www/montage.html"
>magick montage</A></CODE>" with no options is very plain, with quite large
containment squares, no frame, labels, or shadows.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif  montage.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage.jpg"
     ><IMG SRC="montage.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

<A NAME="geometry_size"></A>
<H3>Geometry - Tile Size and Image Resizing </H3>

The "<CODE><A HREF="../option_link.cgi?geometry" >-geometry</A></CODE>"
setting, is the most important control of "<code>magick montage</code>". It
defines the size of the individual thumbnail images, and the spacing between
them. </P>

The size part of the geometry is used as an argument to the <A
HREF="../resize/#resize" >Resize Operator</A>, including all its special
purpose flags.  The position part of the option is interpreted as the amount
of border space to leave around the image, so making this smaller, will make
the gaps between the images smaller. </P>

The default "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" setting is '<CODE>120x120>+4+3</CODE>' which means to
fit any image given into a box 120x120 pixel in size. If the image is larger
shrink it, but don't resize smaller images (as per the <A
HREF="../resize/#larger" >Only Shrink Larger ('>') Flag</A>.

The 'tile' size is then set to the largest dimentions of all the
resized images, and the size actually specified.  That means you will never
get a tile size that is smaller than the specified "<CODE><A
HREF="../option_link.cgi?geometry" >-geometry</A></CODE>" size. </P>

You can remove huge size of the tiles in the previous example space by
modifing the "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" default.  For example by removing the 'size' component,
none of the images will be resized, and the 'tile' size will be set to the
largest dimensions of all the images given.

For example here I ask montage to tile using the largest image given with
a small gap between tiles.  This is a very typical setting to use when all the
input images are small and roughly same size.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -geometry +2+2   montage_geom.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom.jpg"
     ><IMG SRC="montage_geom.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

For example, here I replaced one image with a larger 'logo' image, but set
a the resize setting to '<CODE>48x48</CODE>' to resize both smaller and larger
images.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif logo: \
          -geometry 48x48+2+2   montage_geom_size.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom_size.jpg"
     ><IMG SRC="montage_geom_size.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

And here I again restrict the resize to just images larger than the specified
tile size.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif logo: \
          -geometry 48x48\>+2+2   montage_geom_larger.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom_larger.jpg"
     ><IMG SRC="montage_geom_larger.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As you can see the spacing between images appears to be larger than the
requested 2 pixel spacing. But that is not the case. The tiles are still
separated by 2 pixels, but the images themselves do not fill the 48x48 tile
size requested.  The 'logo' image was still resized to fit into the 48x48
pixel tile. </P>

If you don't want any resizing, then only define the spacing between the
tiles. </P>

Alternatively, use a special size such as '<CODE>1x1&lt;</CODE>' which tells
IM to only resize smaller images to the given size.  As no image can be
smaller that 1 pixel, no image will be resized.  The tile size will thus be
again the largest dimention of all the images on the page. See <A
HREF="#zero_geometry" >Zero Geometry, caution required</A> for reasons why you
may like to do this. </P>

<A NAME="geometry_spacing"></A>
<H3>Geometry - Tile Spacing </H3>

The positional part of the "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" setting, will add space between the individual 'tiles',
by adding a <A HREF="../crop/#border" >Border</A> of those dimensions around
the tiles before <A HREF="../layers/#append" >Appending</A> them together.
</P>

That means for the default "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" setting, of '<CODE>+4+3</CODE>', the tiles will be
spaced from the left and right edges of the final image by 4 pixels, and will
have a 8 pixel (twice the size given) spacing horizontally between the tiles.
The same goes for the vertical spacing. </P>

Note how the space bewteen the tiles when all the images were resized (second
last example) is twice the size of the space around the edges. </P>


<A NAME="tile"></A>
<H3>Tile Layout Controls</H3>

The next most important option in "<code>magick montage</code>" is the "<CODE><A
HREF="../option_link.cgi?tile" >-tile</A></CODE>" setting.  This tells montage
what limits you want on how the tiled images are to be laid out on the final
result.  </P>

In ImageMagick version 6 "<code>magick montage</code>" will make an educated guess as
to how best to tile a given number of images, when you provide no "<CODE><A
HREF="../option_link.cgi?tile" >-tile</A></CODE>" hints.  It does however
assume that the images being tiled are roughly squarish in nature, as it does
not look at the images aspect ratios, when deciding on the tiling to use.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_1.gif      -geometry 16x16+1+1  tile_1.gif
  magick montage font_[12].gif   -geometry 16x16+1+1  tile_2.gif
  magick montage font_[123].gif  -geometry 16x16+1+1  tile_3.gif
  magick montage font_[1-4].gif  -geometry 16x16+1+1  tile_4.gif
  magick montage font_[1-5].gif  -geometry 16x16+1+1  tile_5.gif
  magick montage font_[1-6].gif  -geometry 16x16+1+1  tile_6.gif
  magick montage font_[1-7].gif  -geometry 16x16+1+1  tile_7.gif
  magick montage font_[1-8].gif  -geometry 16x16+1+1  tile_8.gif
  magick montage font_[1-9].gif  -geometry 16x16+1+1  tile_9.gif
  magick montage font_[0-9].gif  -geometry 16x16+1+1  tile_0.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="tile_1.gif"
     ><IMG SRC="tile_1.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_2.gif"
     ><IMG SRC="tile_2.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_3.gif"
     ><IMG SRC="tile_3.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_4.gif"
     ><IMG SRC="tile_4.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_5.gif"
     ><IMG SRC="tile_5.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_6.gif"
     ><IMG SRC="tile_6.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_7.gif"
     ><IMG SRC="tile_7.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_8.gif"
     ><IMG SRC="tile_8.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_9.gif"
     ><IMG SRC="tile_9.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_0.gif"
     ><IMG SRC="tile_0.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  The strange "<CODE>[1-5]</CODE>" syntax is an UNIX shell shorthand, which
  is expanded into a list of filenames.  The "<code>magick montage</code>" command
  itself does not see these characters, just the resulting list of files.
</I></FONT></TD></TR></TABLE></P>

ImageMagick is pretty good at figuring out the right "<CODE><A
HREF="../option_link.cgi?tile" >-tile</A></CODE>" setting to use for a
specific number of input images.  Here is a table of number of input images
and the tile setting IM will used to layout those images.

<TABLE ALIGN=center><TR><TD>
<table class="table table-sm table-hover">
<TR><TH><FONT SIZE=-1>Num Images<TH><FONT SIZE=-1>Tile Setting</TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>     1
                  <TD ALIGN=center><FONT SIZE=-2>  1x1  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>     2
                  <TD ALIGN=center><FONT SIZE=-2>  2x1  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>     3
                  <TD ALIGN=center><FONT SIZE=-2>  3x1  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>     4
                  <TD ALIGN=center><FONT SIZE=-2>  2x2  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>   5 - 6
                  <TD ALIGN=center><FONT SIZE=-2>  3x2  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>   7 - 8
                  <TD ALIGN=center><FONT SIZE=-2>  4x2  </TR>
    </TABLE>
</TD><TD>&nbsp; &nbsp;</TD><TD>
    <table class="table table-sm table-hover" ALIGN=center>
    <TR><TH><FONT SIZE=-1>Num Images<TH><FONT SIZE=-1>Tile Setting</TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>     9
                  <TD ALIGN=center><FONT SIZE=-2>  3x3  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  10 - 12
                  <TD ALIGN=center><FONT SIZE=-2>  4x3  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  13 - 15
                  <TD ALIGN=center><FONT SIZE=-2>  5x3  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  16 - 20
                  <TD ALIGN=center><FONT SIZE=-2>  5x4  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  21 - 24
                  <TD ALIGN=center><FONT SIZE=-2>  6x4  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>    25
                  <TD ALIGN=center><FONT SIZE=-2>  5x5  </TR>
    </TABLE>
</TD><TD>&nbsp; &nbsp;</TD><TD>
    <table class="table table-sm table-hover" ALIGN=center>
    <TR><TH><FONT SIZE=-1>Num Images<TH><FONT SIZE=-1>Tile Setting</TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  26 - 30
                  <TD ALIGN=center><FONT SIZE=-2>  6x5  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  31 - 36
                  <TD ALIGN=center><FONT SIZE=-2>  7x5  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  31 - 35
                  <TD ALIGN=center><FONT SIZE=-2>  7x5  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>    36
                  <TD ALIGN=center><FONT SIZE=-2>  6x6  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  37 - 42
                  <TD ALIGN=center><FONT SIZE=-2>  7x6  </TR>
    <TR><TD ALIGN=center><FONT SIZE=-2>  43 - 48
                  <TD ALIGN=center><FONT SIZE=-2>  8x6  </TR>
    </TABLE>
</TD></TR></TABLE></P>

Note however that IM will not automatically select a 'perfect fit' 6x3 tile
setting for 18 images, nor a 7x4 setting for 28 images. </P>

However if you specify a specific "<CODE><A HREF="../option_link.cgi?tile"
>-tile</A></CODE>" setting, montage will always create an image big enough to
hold that many 'tiles'.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_[1-7].gif  -tile 9x1  -geometry 16x16+1+1  tile_9x1.gif
  magick montage font_[1-7].gif  -tile 4x3  -geometry 16x16+1+1  tile_4x3.gif
  magick montage font_[1-7].gif  -tile 3x3  -geometry 16x16+1+1  tile_3x3.gif
  magick montage font_1.gif      -tile 2x3  -geometry 16x16+1+1  tile_2x3.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="tile_9x1.gif"
     ><IMG SRC="tile_9x1.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_4x3.gif"
     ><IMG SRC="tile_4x3.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_3x3.gif"
     ><IMG SRC="tile_3x3.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_2x3.gif"
     ><IMG SRC="tile_2x3.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As you can see montage created an image that is large enough to hold the
number of tiles specified, regardless of how many images are available to fill
the tile space requested, be it 7 images, or just 1 image. </P>

It will only fill the space row by row, no option is currently provided
to do a column-by-column fill of the tile space. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Before IM v6.1 montage would automatically truncate the extra space if the
  number of images did not use that space. As such a setting such as the
  first "<CODE>9x1</CODE>" image would have been truncated to produce a
  "<CODE>7x1</CODE>" tile image. <P>

  Because of this, past users of montage often used large numbers such as
  "<CODE>999x1</CODE>" to generate a single row of images.  Now such a
  argument will produce a very long image, and could take a long time for IM
  to complete.  As such...

  </I></FONT><CENTER><B>
         Avoid the use of very large tile numbers in IM montage!
  </B></CENTER>

</I></FONT></TD></TR></TABLE></P>

You can avoid the problems of extra space, and multiple images, especially for
an unknown number of input images, by removing either a row, or the column
number, from the "<CODE><A HREF="../option_link.cgi?tile" >-tile</A></CODE>"
setting.  The missing number will be taken by montage as being variable and
montage will only create enough tile space to hold ALL the input images,
producing only one image, never multiple images.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_[1-7].gif  -tile x1  -geometry 16x16+1+1  tile_x1.gif
  magick montage font_[1-7].gif  -tile x2  -geometry 16x16+1+1  tile_x2.gif
  magick montage font_[1-7].gif  -tile x4  -geometry 16x16+1+1  tile_x4.gif
  magick montage font_[1-7].gif  -tile 4x  -geometry 16x16+1+1  tile_4x.gif
  magick montage font_[1-7].gif  -tile 5x  -geometry 16x16+1+1  tile_5x.gif
  magick montage font_[1-7].gif  -tile 9x  -geometry 16x16+1+1  tile_9x.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="tile_x1.gif"
     ><IMG SRC="tile_x1.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_x2.gif"
     ><IMG SRC="tile_x2.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_x4.gif"
     ><IMG SRC="tile_x4.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_4x.gif"
     ><IMG SRC="tile_4x.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_5x.gif"
     ><IMG SRC="tile_5x.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="tile_9x.gif"
     ><IMG SRC="tile_9x.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

This is the more typical use of the "<CODE><A HREF="../option_link.cgi?tile"
>-tile</A></CODE>" setting, as it ensures the montage is sized correctly,
while still allowing it some control in determining the final array size. </P>

Note the last image, in the above where we requested 9 columns of images.  IM
still generated the requested 9 columns, even though less than 9 images were
given. On the other hand the first image (one row requested), is exactly the
right length to hold all the images. </P>

If you have more input images than montage can tile into the space given by a
"<CODE><A HREF="../option_link.cgi?tile" >-tile</A></CODE>" setting, then
multiple images can be generated by montage, either resulting in image
sequence numbers being added to the filename, or some sort of GIF animation,
being created.  See <A HREF="../files/#write_list" >Writing Multiple Images</A>
for details.  </P>

For example, here I have asked montage to save separate images for each page
generated, by supplying a '<CODE>%d</CODE>' for the frame/scene/page number of
each image filename.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage  font_*.gif  -tile 4x1  -geometry +2+2  multi_%d.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="multi_0.gif"
     ><IMG SRC="multi_0.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="multi_1.gif"
     ><IMG SRC="multi_1.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="multi_2.gif"
     ><IMG SRC="multi_2.gif"
           ALIGN=middle VSPACE=2 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>


<A NAME="frame"></A>
<H3>Frame Decoration</H3>

The best part of using montage to arrange images is that it provides a lot of
extra controls to add extra 'fluff' around each image. </P>

For example, you can better define the images being displayed by adding a
"<CODE><A HREF="../option_link.cgi?frame" >-frame</A></CODE>" around each
image.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -tile x1  -frame 5  -geometry +5+5   frame.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="frame.jpg"
     ><IMG SRC="frame.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

This is not like the same option in "<code>magick</code>" (See <A
HREF="../crop/#frame" >Adding a 3D frame</A> example). The montage frame
option will automatically figure out default values for the internal and
external bevel of the frame. As such only a single argument number is needed.
</P>

<A NAME="border"></A>
<H3>Border Decoration</H3>

Sometime around IM v6.1.0, "<A HREF="../option_link.cgi?border"
><CODE>-border</CODE></A>" became a new decorative option of montage.  It now
adds extra 'padding' around each image, after it has been resized according
ot the "<A HREF="../option_link.cgi?geometry" ><CODE>-geometry</CODE></A>"
setting. </P>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -tile x1  -border 5 -geometry +5+5   border.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="border.jpg"
     ><IMG SRC="border.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  The "<A HREF="../option_link.cgi?border" ><CODE>-border</CODE></A>"
  decoration does not currently work when the <A HREF="#frame" >Frame
  Decoration</A> is also applied.

</I></FONT></TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
    Before IM v6.1.0 (approx) <A HREF="../option_link.cgi?border"
    ><B>-border</B></A></CODE> would been applied to images at the point in
    which it appeared in the "<code>magick montage</code>" command line, just like
    it would have with "<code>magick</code>".  </P>
    
    That is border would have been thus added to the image long before the
    images get resized (according to "<A HREF="../option_link.cgi?geometry"
    ><CODE>-geometry</CODE></A>"), which resulted in different border widths
    around each image depending on the size of the image at that point.  It
    was to remove this inconsistancy that <A HREF="../option_link.cgi?border"
    ><B>-border</B></A></CODE> became a special montage setting.

</I></FONT></TD></TR></TABLE></P>


<A NAME="shadow"></A>
<H3>Shadow Decoration</H3>

Adding a shadow with the frame is also quite good.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -tile x1  -frame 5  -shadow  -geometry +5+5   frame_shadow.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="frame_shadow.jpg"
     ><IMG SRC="frame_shadow.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Of course you don't actually need a frame to generate image shadows

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -tile x1  -shadow  -geometry +5+5  -background lightblue \
          shadow_noframe.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="shadow_noframe.jpg"
     ><IMG SRC="shadow_noframe.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As of IM v6.3.1 when 'soft shadows' were implemented, the shadows will now be
shaped according to the transparency of the images being displayed!

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_1.gif  font_7.gif  font_2.gif  font_0.gif \
          -tile x1  -shadow  -geometry +3+5 -background none \
          shadow_shaped.png
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="shadow_shaped.png"
     ><IMG SRC="shadow_shaped.png"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As you can see the shadow used by montage is actually a semi-transparent
color, allowing the background to affect its final color.  This means if you
create a montage with textured background, or use a transparent background and
overlay it, the shadow will do the right thing. </P>

Of course you need to use an image format that can handle semi-transparent
colors, like PNG. Remember because of <A HREF="../formats/#boolean_trans" >GIF
Boolean Transparency</A> you can not use GIF image file format for this
purpose. </P>

Note that shadows do not care about the "<A HREF="../option_link.cgi?geometry"
><CODE>-geometry</CODE></A>" spacing between the images.  As such if the
images are too close together, the shadow of previous images can be obscured
by later images.  For example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -tile x1  -shadow  -geometry +1+1  -background none \
          shadow_spacing.png
</samp></pre></TD></TR></TABLE>
  <A HREF="shadow_spacing.png"
     ><IMG SRC="shadow_spacing.png"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</DIV></P>

It is thus recommended at a reasonable amount of "<A
HREF="../option_link.cgi?geometry" ><CODE>-geometry</CODE></A>" spacing be
provided when using shadow. </P>

To avoid 'edge clipping' shadows to much, the "<A
HREF="../option_link.cgi?shadow" ><CODE>-shadow</CODE></A>" option will add
4 extra edge spacing pixels the right and bottom edges of the final image.
This is on top of the normal "<A HREF="../option_link.cgi?geometry"
><CODE>-geometry</CODE></A>" spacing provided.  However as you can see above,
this is not always enough space. </P>

Montage currently also provides no controls for the offset, color or the
'softness' of the generated shadow (at least not yet), but then, you didn't
have such control with hard rectangular shadow that was provided by older
versions of montage. </P>


<A NAME="label"></A>
<H3>Labeling Montage Images</H3>

You can also tell montage to label the image with their source filenames,
though you probably need to resize the image frames, or the labels may not
fit, truncating the text label. </P>

In this case we added a "<CODE>60x60&gt;</CODE>" to the geometry string, which
tells IM to shrink larger images to fit into this space, but <I>not</I> to
enlarge images if they are smaller. </P>

This is probably the most typical use of montage.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage -label '%f'  balloon.gif medical.gif rose: present.gif shading.gif \
          -tile x1  -frame 5  -geometry '60x60+4+4>'  label_fname.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="label_fname.jpg"
     ><IMG SRC="label_fname.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV>

The '<CODE>%f</CODE>' is a special format character, which can pull out
various details about the images in memory.  See <A
HREF="https://imagemagick.org/script/escape.php" >Image Property
Escapes</A> for details of other information you can extract from images. </P>

You don't have to use a "<CODE><A HREF="../option_link.cgi?frame"
>-frame</A></CODE>" when labeling thumbnails.  The labels are not shadowed, so
that they remain clearly readable.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  montage -label '%f'  balloon.gif medical.gif logo: present.gif shading.gif \
          -tile x1 -shadow -geometry '60x60+2+2>'  label_shadow.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="label_shadow.jpg"
     ><IMG SRC="label_shadow.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

And as of IM v 6.2.1 you can now re-label images after they have been
read in using the "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
image attribute operator. </P>

Lets use the "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
operator to add more information about the images. And also few more montage
settings...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif logo: present.gif shading.gif \
          -tile x1  -geometry '90x32+2+2>'  -pointsize 10 \
          -set label '%f\n%wx%h'   -background SkyBlue   label_fname3.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="label_fname3.jpg"
     ><IMG SRC="label_fname3.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As we showed in the examples above you can use the "<CODE><A
HREF="../option_link.cgi?label" >-label</A></CODE>" setting to define the
default label for an image, as they are read in, or you can re-label the image
afterward using the "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
operator. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Note that '<CODE>%wx%h</CODE> gives the current pixel width and height of
  the image as it is in memory.  If the image size was modified, such as
  during input this may be different to the images in disk (or creation) size.
  Use '<CODE>%[width]x%[height]</CODE>' instead if you want its in memory
  pixel size.
</I></FONT></TD></TR></TABLE></P>

You can also label images differently by setting label of individual images.
Either option can be used, though you will need to use of parenthesis to limit
what images the "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
operator will be applied to. </P>

Here for example we use both forms of labeling. But lets also add a title to
the montage, just because we can...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage -label Balloon   balloon.gif  \
          -label Medical   medical.gif  \
          \( present.gif  -set label Present  \) \
          \( shading.gif  -set label Shading  \) \
          -tile x1  -frame 5  -geometry '60x60+2+2>' \
          -title 'My Images'     titled.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="titled.jpg"
     ><IMG SRC="titled.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

You can turn off image labeling for the next image(s) by using a "<CODE>-label
'' </CODE>"  or  "<CODE>+label</CODE>".  However as you will see later these
two settings are not quite the same.  The same applies for a post reading,
label "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>" operation.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage             balloon.gif \
          -label 'My Image'  medical.gif \
          +label             present.gif \
          -label ' '         shading.gif \
          -tile x1  -frame 5  -geometry '60x60+2+2>'   labeling.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="labeling.jpg"
     ><IMG SRC="labeling.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

The last image shows how using a space for an image label, you can create a
image label space, but leave it blank. </P>

This presents a good rule of thumb when using montage...  </P>

<DIV ALIGN=center><B>
           Either label all your images, or none of them!
</B></DIV> </P>

You don't have to label your images during the montage operation itself.  Both
the MIFF and PNG formats, can store a label as part of their image format.
</P>

Montage will automatically label any image read in that already contains a
label.  This is automatic and does not need to be specified, and I have used
this technique to generate some very complex image montages. For example the
montage array in <A HREF="../misc/#annotate" >Annotate Angle Examples</A> was
created using this technique. </P>

If you do not want this automatic labeling, you must specifically tell montage
to reset all the labels being read in or created to the empty string, using
"<CODE>-label ''</CODE>" before reading the image. Or you can
just delete the label meta-data using "<CODE>+set label</CODE>"
after reading the images. </P>

This is where "<CODE><A HREF="../option_link.cgi?label" >+label</A></CODE>"
differs from using an empty label ("<CODE>-label&nbsp;''</CODE>"). The former
will reset the default behavior back to automatically using any label
meta-data that the image being read-in may have , while the later replaces the
label with an empty string, which effectiavvly removes the label. You can also
preserve the original label of the image using
"<CODE>-label&nbsp;'%l'</CODE>", which can be usful as a NO-OP labeling option
in image processing scripts. </P>

Note that "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>" cannot
restore the original label of an image, once it has been modified or removed,
either by using "<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>"
or "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>" </P>

<A NAME="image_labels"></A>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -label 'medical'  medical.gif  label_medical.png
  magick -label 'logo'     logo:        label_logo.png
  magick -label 'rose'     rose:       label_rose.png

  magick montage    label_medical.png \
          -label '' label_logo.png    \
          +label    label_rose.png    \
          -tile x1  -frame 5  -geometry '60x60+2+2>' label_control.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="label_control.jpg"
     ><IMG SRC="label_control.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

In the above you can see that the first image was labeled using the
label supplied with the image itself.  The second had the incoming label
removed by a "<CODE>-label '' </CODE>" setting, while the third also used the
images label because we turned-off the label setting with
"<CODE><A HREF="../option_link.cgi?label" >+label</A></CODE>". </P>

<A NAME="metadata"></A>
<H3>Using Saved Image MetaData</H3>

When generating images for later use by montage it is important to know
what sort of image metadata a specific image file format can save.

For example only PNG, and MIFF image file format can actually store
'<CODE>label</CODE>' meta-data in their saved image file format...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -label 'GIF'  balloon.gif  label.gif
  magick -label 'JPG'  medical.gif  label.jpg
  magick -label 'PNG'  present.gif  label.png
  magick -label 'MIFF' shading.gif  label.miff

  montage label.gif label.jpg label.png label.miff \
          -tile x1  -frame 5  -geometry '60x60+2+2>' label_files.jpg
  rm label.*
</samp></pre></TD></TR></TABLE>
  <A HREF="label_files.jpg"
     ><IMG SRC="label_files.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

However all the common file cormats allow you to use '<CODE>comment</CODE>'
meta-data, which you can use by specifying a '<CODE>%c</CODE>' argument to
"<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>".

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -comment 'GIF'  balloon.gif  comment.gif
  magick -comment 'JPG'  medical.gif  comment.jpg
  magick -comment 'PNG'  present.gif  comment.png
  magick -comment 'MIFF' shading.gif  comment.miff

  magick montage -label '%c' comment.gif comment.jpg comment.png comment.miff \
          -tile x1  -frame 5  -geometry '60x60+2+2>' comment_files.jpg
  rm comment.*
</samp></pre></TD></TR></TABLE>
  <A HREF="comment_files.jpg"
     ><IMG SRC="comment_files.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

This is often more useful for pictures saved in the JPEG file format, though
JPEG image comments generally are too large (often whole paragraphs describing
the image), for use as montage labels, as they will not be word wrapped (see
<A HREF="#polaroid" >Montage of Polaroid Photos</A> for an alternative method
of labeling using image 'comment' meta-data). </P>

Many other programs also automatically add 'made-by' labels and comments to
images they save (YUCK) so some caution is recommended.  The <A
HREF="http://www.gimp.org/" >GIMP</A> program particularly likes to add such
comments and labels, unless you tell it not to, every time you save an image.
</P>

Note that IM is generally not used to add comments to saved JPEG files, (due
to <A HREF="../formats/#jpg" >JPEG Lossy Compression</A>) unless processing
them for other reasons.  Instead they are usually added by some other
method in order to avoid reading and re-writing the image data and thereby
degrading the JPEG image files in which you are adding comments. See <A
HREF="../formats/#jpg_lossless" >lossless JPEG Processing</A> options, for
some such methods. </P>

It is also important to note that labeling (and image 'comments') is not
specific to montage.  Montage just makes automatic use of image labels if
present.  Labels and comments are attached to images, and the their specific
file formats, and is not montage or even IM specific.  </P>

The PNG and MIFF file format also allow you to use a less commonly used
'<CODE>caption</CODE>' meta-data.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick balloon.gif -set caption 'GIF'  caption.gif
  magick medical.gif -set caption 'JPG'  caption.jpg
  magick present.gif -set caption 'PNG'  caption.png
  magick shading.gif -set caption 'MIFF' caption.miff

  magick montage -label '%[caption]' caption.gif caption.jpg caption.png caption.miff \
          -tile x1  -frame 5  -geometry '60x60+2+2>' caption_files.jpg
  rm caption.*
</samp></pre></TD></TR></TABLE>
  <A HREF="caption_files.jpg"
     ><IMG SRC="caption_files.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Actually both these file formats allow you to save ANY <A
HREF="../basics/#property" >Image property Meta-data</A> that may be present
in an image when it is saved!

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick balloon.gif -set my_data 'GIF'  my_data.gif
  magick medical.gif -set my_data 'JPG'  my_data.jpg
  magick present.gif -set my_data 'PNG'  my_data.png
  magick shading.gif -set my_data 'MIFF' my_data.miff

  magick montage -label '%[my_data]' my_data.gif my_data.jpg my_data.png my_data.miff \
          -tile x1  -frame 5  -geometry '60x60+2+2>' my_data_files.jpg
  rm my_data.*
</samp></pre></TD></TR></TABLE>
  <A HREF="my_data_files.jpg"
     ><IMG SRC="my_data_files.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>


<A NAME="null"></A>
<H3>Leaving Gaps in a Montage</H3>

While you can leave extra space in a montage at the bottom by judicious use of
the "<CODE><A HREF="../option_link.cgi?tile" >-tile</A></CODE>" setting and
controlling the number of images given, leaving an empty tile space in the
middle of a montage requires the use of a special image.  </P>

The "<CODE>null:</CODE>" generated image was defined specifically for this
purpose.  The position in which it appears will not receive any label (even if
one is defined), nor will it have any frame or shadow 'fluff' added.  The tile
is just left completely empty except for the background color (or texture) of
the montage drawing canvas itself.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage -label 'Image' medical.gif null: present.gif \
          -tile x1  -frame 5  -geometry +2+2   montage_null.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_null.jpg"
     ><IMG SRC="montage_null.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Note that to other IM commands the "<CODE>null:</CODE>" image is represented a
single pixel transparent image.  It is also used as a 'error image' for
options like "<CODE><A HREF="../option_link.cgi?crop" >-crop</A></CODE>" or
"<CODE><A HREF="../option_link.cgi?trim" >-trim</A></CODE>" which
could produce a 'zero' or empty image as a result of the operation. </P>

This special image cannot be saved and then later used to leave gaps,
currently it is only 'special' if given on the command line of
"<code>magick montage</code>". </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  There is no method, at this time to allow montaged images to span multiple
  rows or columns, as you can in HTML tables.  Nor can you generate variable
  sized rows and columns to best fit the array of images being generated.
  </P>

  If you really need this sort of ability you will need to develop your own
  montage type of application.  If you do develop something, then please
  contribute, and we'll see about merging it into the existing montage
  application. </P>

  Some solutions for this includes labeling and framing the image thumbnails
  yourself and then using either <A HREF="../layers/#append" >Append
  Images</A> or use a more free form <A HREF="../layers/#layer_examples"
  >Layering Image</A> technique. </P>

</I></FONT></TD></TR></TABLE></P>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="settings">
<H2>More Montage Settings </H2>
</A>

The "<code>magick montage</code>" settings I have shown above are only the basic
controls for montage.  Their are a lot of other settings you may like to
consider for your own needs. </P>

<A NAME="color">
<H3>Montage Color Settings</H3>
</A>

<TABLE ALIGN=center WIDTH=90%>
<TR valign="top"><TD><CODE><A HREF="../option_link.cgi?background"
    ><B>-background</B></A></CODE></TD>
<TD>The color outside the drawn frame.  Often this is set to the
    '<CODE>none</CODE>' or '<CODE>transparent</CODE>', for use on web pages.
    The <A HREF="../option_link.cgi?texture" >-texture</A> setting will
    be used instead if given. </TD>

<TR valign="top"><TD><CODE><A HREF="../option_link.cgi?bordercolor"
    ><B>-bordercolor</B></A></CODE> &nbsp; </TD>
<TD>The fill color inside the frame for images, or any border padding.
    Any transparent areas in an image will become this color, unless
    no such decoration is added. </TD>

<TR valign="top"><TD><CODE><A HREF="../option_link.cgi?mattecolor"
    ><B>-mattecolor</B></A></CODE></TD>
<TD>The color used as the frame color. Note that the color is also made
    lighter and darker to give the frame a beveled 3D look. So this setting
    really defines 5 colors.  (See also <A HREF="../crop/#frame_border"
    >Framing Images</A>) </TD>

<TR valign="top"><TD><CODE><A HREF="../option_link.cgi?fill"
    ><B>-fill</B></A></CODE></TD>
<TD>The fill color for text labels and titles. </TD>

<TR valign="top"><TD><CODE><A HREF="../option_link.cgi?stroke"
    ><B>-stroke</B></A></CODE></TD>
<TD>The stroke color for text labels and titles. </TD>

</TD></TR>
</TABLE></P>

<A NAME="controls">
<H3>Montage Control Settings</H3>
</A>
<BLOCKQUOTE><DL>
<DT><CODE><A HREF="../option_link.cgi?tile"
    ><B>-tile</B></A> {<I>cols</I>}x{<I>rows</I>}</CODE>
<DD>The number of images across and down used to fill a single montage image.
    If more images were read in or created than fits in a
    single montage image, then multiple images will be created.
    (See <A HREF="#tile" >Tile Controls</A> above)

<DT><CODE><A HREF="../option_link.cgi?title"
    ><B>-title</B></A> {<I>string</I>}</CODE>
<DD>Set a title over the whole montage, using the same font (but larger)
    as that used to label the individual images.

<DT><CODE><A HREF="../option_link.cgi?frame"
    ><B>-frame</B></A> {<I>width</I>}</CODE>
<DD>Create a frame around the box containing the image, using the <I>width</I>
    provided (must be at least 2, but 5 or 6 is a good value). If used any
    transparency in images will also become the border color.

<DT><CODE><A HREF="../option_link.cgi?frame"
    ><B>-border</B></A> {<I>width</I>}</CODE>
<DD>Create a border around the image, using the <I>width</I> provided.
    If used any transparency in images will also become the border color.

<DT><CODE><A HREF="../option_link.cgi?shadow"
    ><B>-shadow</B></A></CODE>
<DD>Generate a shadow of the frame.  Note that no argument is required or
    expected.  

<DT><CODE><A HREF="../option_link.cgi?texture"
    ><B>-texture</B></A> {<I>filename</I>}</CODE>
<DD>Use the given texture (tiled image) for the background instead of
    a specific color.  See the section on <A HREF="#bg" >Background and
    Transparency</A> below for more information.

<DT><CODE><A HREF="../option_link.cgi?geometry"
    ><B>-geometry</B></A> {<I>W</I>}x{<I>H</I>}+{<I>X</I>}+{<I>Y</I>}
    </CODE>
<DD>Resize images after they have all been read in before montage overlays
    them onto its canvas.  It also defines the size and the spacing between
    the tiles into which the images are drawn.  If no size is specified the
    images will not be resized.

<!--  This appears to be obsolete - again!
<DT><CODE><A HREF="../option_link.cgi?compose"
    ><B>-compose</B></A></CODE>
<DD>The alpha composition setting "<CODE><A HREF="../option_link.cgi?compose"
    >-compose</A></CODE>" defines how images are to be overlaid onto frame
    tile and shadows.  It does not however effect how that result is then
    overlaid onto the background canvas of the montage.  For more detail see
    <A HREF="#bg" >Background and Transparency</A> montage examples below
-->

<DT><CODE><A
    HREF="../option_link.cgi?gravity"
    ><B>-gravity</B></A> {<I>direction</I>}</CODE>
<DD>if the image is smaller than the frame, where in the frame is the
    image to be placed.  By default it is centered.
</DL></BLOCKQUOTE></P>

Added to the above are all the font settings that the "<CODE>label:</CODE>"
image creation operator understands (See <A HREF="../text/#label" >Label Image
Generator</A>). These settings are used for the creation of labels added
underneath the displayed image. </P>

These include settings such as "<CODE><A HREF="../option_link.cgi?font"
>-font</A></CODE>", "<CODE><A HREF="../option_link.cgi?pointsize"
>-pointsize</A></CODE>" (ignored for "<CODE><A HREF="../option_link.cgi?title"
>-title</A></CODE>"),
"<CODE><A HREF="../option_link.cgi?density" >-density</A></CODE>",
"<CODE><A HREF="../option_link.cgi?fill" >-fill</A></CODE>",
"<CODE><A HREF="../option_link.cgi?stroke" >-stroke</A></CODE>", and
"<CODE><A HREF="../option_link.cgi?strokewidth" >-strokewidth</A></CODE>". </P>

As long as any or all of the above setting are defined or reset, before the
final 'output filename' argument, montage will use them as you have requested.
</P>


<A NAME="reuse">
<H3>Re-Using Settings for Image Read/Creation</H3>
</A>

Note however that many of these options are also used for other purposes, in
either the generation of images or during image processing.  But thanks to the
'do things as you see them' command line handling on IM v6, this presents no
problem to the "<code>magick montage</code>" command.  </P>

That means you are free to use any of these option settings to read, create,
or modify the images being read in, then reset those settings after all the
images have been read in or created.  The final setting value will be what
montage will use for its final processing. </P>

This was not the case in versions of IM before version 6, in which it was
generally impossible to separate image creation settings, from montage
settings, without generating intermediate images (such as in the <A
HREF="#image_labels" >Image Labels</A> example above). </P>

Here is a practical example of setting reuse. I wanted to make a table of some
of the fonts I have been using in these example pages, then reset the
settings to other values for the final processing of the images by montage.

<A NAME="fonts">
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage -pointsize 24 -background Lavender \
          -font Candice      -label Candice      label:Abc-123 \
          -font Corsiva      -label Corsiva      label:Abc-123 \
          -font SheerBeauty  -label SheerBeauty  label:Abc-123 \
          -font Ravie        -label Ravie        label:Abc-123 \
          -font Arial        -label Arial        label:Abc-123 \
          -font ArialI       -label ArialI       label:Abc-123 \
          -font ArialB       -label ArialB       label:Abc-123 \
          -font ArialBk      -label ArialBk      label:Abc-123 \
          -font CourierNew   -label CourierNew   label:Abc-123 \
          -font LokiCola     -label LokiCola     label:Abc-123 \
          -font Gecko        -label Gecko        label:Abc-123 \
          -font Wedgie       -label Wedgie       label:Abc-123 \
          -font WebDings     -label WebDings     label:Abc-123 \
          -font WingDings    -label WingDings    label:Abc-123 \
          -font WingDings2   -label WingDings2   label:Abc-123 \
          -font Zymbols      -label Zymbols      label:Abc-123 \
          \
          -frame 5  -geometry +2+2   -font Arial -pointsize 12 \
          -background none  -bordercolor SkyBlue  -mattecolor DodgerBlue \
          montage_fonts.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_fonts.gif"
     ><IMG SRC="montage_fonts.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</DIV></A>

Note the two stages to the "<code>magick montage</code>" command. Which I clearly
marked using an extra almost empty line. </P>

The first part is essentially exactly as you would define multiple images
using the normal IM "<code>magick</code>" command, and is processed in the
same, 'do it as you see it' order. </P>

The second part, defines <I>all</I> the settings I wanted the
"<code>magick montage</code>" command itself to use.   That is the framing, image
resizing, fonts and colors I wanted to use in the final montage image. I
especially take care to reset the "<CODE><A HREF="../option_link.cgi?font"
>-font</A></CODE>" and "<CODE><A HREF="../option_link.cgi?pointsize"
>-pointsize</A></CODE>" settings for the labeling underneath the montaged
images. </P>

While you can separate the options of "<code>magick montage</code>" like this, you
can actually define the montage settings at any time on the command line.  As
long as those settings do not interfere with your image creating and
processing options, and are still defined correctly when the end of the
command line is reached, "<code>magick montage</code>" will use them. </P>

ASIDE: You may like to look at the shell script I wrote to do something
similar to the above (and which works with earlier versions of montage) to
display a directory of truetype (.ttf) fonts, called "<CODE><A
HREF="../scripts/show_fonts" ><B>show_fonts</B></A></CODE>". Another shell
script example is "<CODE><A HREF="../scripts/show_colors"
><B>show_colors</B></A></CODE>". </P>


<A NAME="diff"></A>
<H3>Montage vs Magick Option Differences</H3>

Now while "<CODE>magick montage</CODE>" generally allow you to use any
"<code>magick</code>" settings and operators in reading and processing its
input images, their are a few differences which need to be highlighted. </P>

These "<code>magick</code>" operators and settings are different when used
within "<code>magick montage</code>". </P>

<BLOCKQUOTE><DL>
<DT><CODE><A HREF="../option_link.cgi?tile" ><B>-tile</B></A></CODE>
<DD>In "<code>magick</code>" the "<CODE><A HREF="../option_link.cgi?tile"
    >-tile</A></CODE>" setting defines an image to use as a texture instead of
    using the "<CODE><A HREF="../option_link.cgi?fill" >-fill</A></CODE>"
    color.  In "<code>magick montage</code>" it defines how to layout the individual
    image cell 'tiles'. See <A HREF="#tile" >Tile Layout Controls</A> above
    for more detail. </P>

<DT><CODE><A HREF="../option_link.cgi?frame" ><B>-frame</B></A></CODE>
<DD>In "<code>magick</code>" this is an operator used to add a 3D frame
    border around images, and requires 4 arguments to work correctly (See <A
    HREF="../crop/#frame" >Convert Frame</A> examples). See <A HREF="#frame"
    >Frame Decoration</A> for more detail.  </P>

<DT><CODE><A HREF="../option_link.cgi?border" ><B>-border</B></A></CODE>
<DD>Sometime around IM v6.1.0 this operator became a special montage option.
    As such, like the previous frame option it only takes one number as an
    argument, rather than two arguments as per the <A HREF="../crop/#border"
    >Convert Border</A>.  See <A HREF="#border" >Border Decoration</A> for
    more detail.

<DT><CODE><A HREF="../option_link.cgi?shadow" ><B>-shadow</B></A></CODE>
<DD>The "<CODE><A HREF="../option_link.cgi?shadow" >-shadow</A></CODE>"
    option in "<code>magick</code>" takes an argument which is used to create
    a soft blurry shadow to which can be place under a second copy of the
    original image.  However in "<code>magick montage</code>" this is only a Boolean
    setting that just turns the rectangular shadowing abilities, on and off.
    See <A HREF="#shadow" >Shadow Decoration</A> for more detail.</P>

<DT><CODE><A HREF="../option_link.cgi?geometry" ><B>-geometry</B></A></CODE>
<DD>The "<CODE><A HREF="../option_link.cgi?geometry" >-geometry</A></CODE>"
    option in "<code>magick montage</code>" is simply saved to provide the size of
    the images within each cell of the final montage, and the spacing between
    the cells.  In "<code>magick</code>" it resizes just the last image, and
    sets the off set for <A HREF="../compose/#compose" >Image Composition</A>.
    </P>

</DL></BLOCKQUOTE></P>

If you really need to use the "<code>magick</code>" form of these options,
then you will need to pre-process your images using "<code>magick</code>"
before passing them to "<code>magick montage</code>". </P>

One method using intermediate files was demonstrated in the <A
HREF="#image_labels" >Image Labels</A> example above. </P>

Another is to just do your processing in "<code>magick</code>" and just pipe
the resulting multiple images into "<code>magick montage</code>".  This separation is
easy to do if you always do your image input handling first, then set the
"<code>magick montage</code>" specific settings afterward, such as I have done in all
these examples.  This is especially shown in the last font example above.
</P>

For example lets frame our images using the "<code>magick</code>" frame,
and then frame them again using the "<code>magick montage</code>" labeled frames.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -label %f   balloon.gif medical.gif present.gif shading.gif \
          -mattecolor peru  -frame 10x5+3+0    miff:-  |\
     magick montage  -   -tile x1  -frame 5  -geometry '64x56+5+5>' double_frame.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="double_frame.jpg"
     ><IMG SRC="double_frame.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

You can also see the extra arguments required by the "<code>magick</code>"
form of the "<CODE><A HREF="../option_link.cgi?frame" >-frame</A></CODE>"
operator. </P>


<HR><!-- ---------------------------------------------------------------- -->
<A NAME="index"></A>
<H2>Indexes of Image Directories</A></H2>

<A NAME="html"></A>
<H3>HTML Thumbnail Image Maps</H3>

Montage is especially designed for generating thumbnail maps of images. </P>

For example here I have created an index of the <A HREf="../img_photos/" >Photo
Images</A> source directory, which holds the digital photos used for examples
throughout IM Examples.  Click the 'art' image below to view the result.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage -label '%t\n%[width]x%[height]' \
          -size 512x512 '../img_photos/*_orig.*[120x90]' -auto-orient \
          -geometry +5+5 -tile 5x  -frame 5  -shadow  photo_index.html
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="photo_index.html"
     ><IMG SRC="../img_www/doc_html.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>IM Examples</NOBR
><BR>Photo Store</NOBR
></A></FONT></TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Note the use of '<CODE>%[width]x%[height]</CODE>' instead of just
  '<CODE>%wx%h</CODE>'.  This is important as the image is being resized as it
  is read in.  The former will label the images with their original pixel size
  as it is on disk, while the latter will use the current resized size of the
  image.   This is something that is easily overlooked by users.
</I></FONT></TD></TR></TABLE></P>


The result of this command were three files...
<BLOCKQUOTE><TABLE CELLSPACING=0 CELLPADDING=0 width="100%">
<TR valign="top"><TD><B><CODE><A HREF="photo_index.png"
    >photo_index.png</A></CODE></B></TD>
    <TD>The montage of all thumbnails of the images</TD></TR>
<TR valign="top"><TD><B><CODE><A HREF="photo_index_map.shtml.txt"
    >photo_index_map.shtml</A></CODE></B></TD>
    <TD>An HTML 'image map' for the thumbnail image</TD></TR>
<TR valign="top"><TD><B><CODE><A HREF="photo_index.html.txt"
    >photo_index.html</A></CODE></B></TD>
    <TD>The HTML thumbnail index page for the World Wide Web.
    <BR>This also includes a copy of the previous image map.</TD></TR>
</TABLE></BLOCKQUOTE></P>

Of course you don't have to generate an HTML index file if you only want an
index image.  In that case just replace "<CODE>INDEX.html</CODE>" in the
command above with the image you want to generate. </P>

Note the use of the <A HREF="https://imagemagick.org/script/escape.php"
>Image Property Escape</A> '<CODE>%t</CODE>' for the image  "<CODE><A
HREF="../option_link.cgi?label" >-label</A></CODE>".  This is the filename of
the image without any 'path' components. Though the HTML link will still
contain the appropriate 'path' components allowing you to build the index
image in a different directory to the images themselves. </P>

The source images "<CODE>'*_orig.*'</CODE>" in the above examples is quoted,
so the "<code>magick montage</code>" command does the expansion of '*' itself, and
not the command line shell.  This avoids any command line length limits that
you may have problems with.  Also I do some initial resizing of images
'<CODE>[120x190]</CODE>' as I read them (see <A HREF="../files/#read_mod"
>Read Image Modifiers</A>).  </P>

For JPEG images I also specified a smaller "<CODE><A
HREF="../option_link.cgi?size" >-size</A></CODE>" setting so the JPEG library
can do some very rough initial scaling, and not read the whole image into
memory.  If this is not done, then very large JPEG images could use up an
enormous amount of memory and CPU cycles when there is no real need.  I also
"<CODE><A HREF="../option_link.cgi?strip" >-strip</A></CODE>" any profiles
that the images may have.  For more info see <A HREF="../thumbnails/#profiles"
>Profiles, Stripping, and JPEG Handling</A> and <A HREF="../formats/#jpg_read"
>Reading JPEG Images</A>. </P>

Remember the montage "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" option can also specify a final resize setting, though
in this case it is isn't needed as I did it during the read process, so I
don't set any 'size' in that setting. </P>

Finally the "<CODE><A HREF="../option_link.cgi?tile" >-tile</A></CODE>" option
of '<CODE>5x</CODE>' is used to ensure all images appear in a single image,
otherwise "<code>magick montage</code> could generate a multi-page HTML files, which
are not correctly linked together. This will hopefully change, though HTML
generation is not a primary goal of ImageMagick.  </P>

For other ways of generating thumbnails and HTML index pages, read the
<A HREF="../thumbnails/" >Thumbnail Examples Page</A>. </P>


<A NAME="html_jpeg"></A>
<H3>Smaller HTML Index Maps, using JPEG images</H3>

The above index image generated a PNG format index image.  This was used
because it is a non-lossy format, which can be important when the images being
indexed are of wildly different colors.  It also enables the use of the new
'soft shadows' features of montage if the background color is set to
'<CODE>transparent</CODE>' or '<CODE>none</CODE>'. </P>

Very very old IM's will have generated a GIF image for the above.  However,
this has some heavy color reduction on the results as part of the formats
limitations.  It also did not allow the use of semi-transparent 'soft shadows'
as PNG allows. </P>

JPEG also does not allow semi-transparency, but that is not a problem if you
do not use a transparent background for the image. It is however a lot smaller
than PNG, which provides a way to  drastically reduce the size of the index
image, especially for web use, and still handle a large range of colors. </P>

However, HTML output above only generates PNG format images, so you will need
to not only magick the PNG to JPEG, but also some extra processing to fix the
HTML file.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOWARN>
  magick montage -label '%t\n%[width]x%[height]' \
          -size 512x512 '../img_photos/*_orig.*[120x90]' -auto-orient \
          -geometry +5+5 -tile 5x  -frame 5  -shadow  photo_jpeg.html
  magick photo_jpeg.png photo_jpeg.jpg
  perl -i -lpe 's/src="photo_jpeg.png"/src="photo_jpeg.jpg"/' photo_jpeg.html
  rm -f  photo_jpeg.png  photo_jpeg_map.shtml
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="photo_jpeg.html"
     ><IMG SRC="../img_www/doc_html.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>IM Examples</NOBR
><BR>Photo Store</NOBR
></A></FONT></TD></TR></TABLE></P>

The above commands are rather tricky so here is what happens...
<UL>
<LI>First I generate a montage thumbnail HTML index, as I did previously.
    This generated the files: "<CODE>photo_jpeg.html</CODE>" and
    "<CODE>photo_jpeg.png</CODE>"
<LI>I then converted the PNG image to a smaller, lossy, JPEG image.
<LI>Then I used a small '<CODE>perl</CODE>' one line script to
    change HTML file to use the JPEG image instead of PNG.
<LI>And finally I removed the PNG image, as well as the SHTML map file which
    I don't need.
</UL></P>

And hey presto, we have a Thumbnail index using a very small JPEG image for
the thumbnail index image. </P>

Here are comparisons of the file sizes of the thumbnail index image...

<!-- <CODE EXECUTE NOIMAGE OUT=photo_index_sizes.txt>
  ( ls -l photo_index.png;\
    ls -l photo_jpeg.jpg;\
  ) | awk '{printf "%6s %s\n", $5, $NF}' -
</CODE> -->
<DIV ALIGN=center>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="photo_index_sizes.txt"
     ><IMG SRC="photo_index_sizes.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

That is the image used for the index is only about 15% of the size of the
original PNG image. A big saving for a downloadable web page of thumbnails!
</P>

You can make the JPEG image even smaller by using a smaller "<CODE><A
HREF="../option_link.cgi?quality" >-quality</A></CODE>" setting, though the
default setting produces a very reasonable result.  Other
possible options include using "<CODE><A
HREF="../option_link.cgi?sampling-factor" >-sampling-factor</A> 2x1</CODE>" to
make it even smaller. </P>


<A NAME="vid"></A>
<H3>Visual Index Images <FONT SIZE=-1>(a non-montage solution)</FONT></H3>

An alternative to using montage, is to use a special "visual index" input
format...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick 'vid:../img_photos/*_orig.*' vid_index.gif
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="vid_index.gif"
     ><IMG SRC="../img_www/doc_art.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>Visual Index of</NOBR
><BR>Photo Store</NOBR
></A></FONT></TD></TR></TABLE></P>

And can also generate 'clickable' HTML index files.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick 'vid:../img_photos/*_orig.*' vid_index.html
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="vid_index.html"
     ><IMG SRC="../img_www/doc_html.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>Visual HTML of</NOBR
><BR>Photo Store</NOBR
></A></FONT></TD></TR></TABLE></P>
<!-- <CODE EXECUTE>
  rm vid_index_map.shtml
</CODE>-->

It is obvious that "<CODE>VID:</CODE>" uses montage internally to generate the
index array. However you do not have the same controls as you do if you had
used montage directly. </P>

Note that a VID HTML index creates a PNG format thumbnail image. </P>


<A NAME="polaroid"></A>
<H3>A Montage of Polaroid Photos</H3>

With the advent of a <A HREF="../transform/#polaroid" >Complex Polaroid
Transform</A> it is now possible to generate quite a different style of
montage, and montage indexing.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE RANDOM>
  magick montage -size 256x256 '../img_photos/*_orig.*' -auto-orient \
          -auto-orient -thumbnail 128x128 \
          -set caption '%t' -bordercolor AliceBlue -background grey20 \
          +polaroid \
          +set label   -background white  -geometry +1+1  -tile 4x \
          polaroid_index.html
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="polaroid_index.html"
     ><IMG SRC="../img_www/doc_html.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>Polaroid<BR>Montage</A></FONT></TD></TR></TABLE></P>

Note that as I used "<CODE><A HREF="../option_link.cgi?polaroid"
>+polaroid</A></CODE>" to frame and label the images, I needed to resize the
image (using "<CODE><A HREF="../option_link.cgi?thumbnail"
>-thumbnail</A></CODE>") myself, and make sure the "<CODE><A
HREF="../option_link.cgi?background" >-background</A></CODE>" and image
"<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>" has been reset
before actually creating the "<code>magick montage</code>" index array. </P>

The <A HREF="../transform/#polaroid" >Polaroid Transform</A> however tends to
blur the text during the addition of the 'curl' to the thumbnail image.
However you can improve the overall by generating the polaroid images at a
larger size then shrinking the result by 50%.  The only drawback is the
reduced 'shadow' effect.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE RANDOM>
  magick montage -size 400x400  '../img_photos/*_orig.*' \
          -auto-orient -thumbnail 200x200 \
          -set caption '%t' -bordercolor Lavender -background grey40 \
          -pointsize 9  -density 144x144  +polaroid  -resize 50% \
          +set label   -background white  -geometry +1+1  -tile 5x \
          polaroid_index2.html
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
<FONT size=-2>
  <A HREF="polaroid_index2.html"
     ><IMG SRC="../img_www/doc_html.png"       WIDTH=48 HEIGHT=48
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"
><BR>Sharper<BR>Polaroid<BR>Montage</A></FONT></TD></TR></TABLE></P>

This fancy montage, as well as other techniques shown above was used to create
a script "<CODE><A HREF="../scripts/generate_index"
>generate_index</A></CODE>" to generate a montage thumbnail index in the
actual "<CODE><A HREF="../img_photos/" >photo_store</A></CODE>" directory.
</p>

See <A HREF="../img_photos/INDEX.html" >Photograph Store Index</A> for the
results of this script. </P>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="special_usage">
<H2>Special Techniques using Montage</H2>
</A>

<A NAME="columns"></A>
<H3>Montage into Columns</H3>

By default "<code>magick montage</code>" can only place the images in the order given
(typically sorted order) row by row.  However sometimes you would like to have
them shown in column order. </P>

This can not be done with a single command, but requires a pipe-line of at
least two commands.  For example here I generate a page of 5x3 tiles, using
two montages.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE RANDOM>
  magick montage font_*.gif  -tile 1x3  -geometry 16x16+1+1  miff:- |\
    magick montage -  -geometry +0+0 -tile 5x1  montage_columns.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="montage_columns.gif"
     ><IMG SRC="montage_columns.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]" ></A>
</TD></TR></TABLE></P>

Note that it is the first "<code>magick montage</code>" that creates the tiles and
performs any of the geometry tile sizing, framing, labeling and spacing
needed.  It will then output one image for each column of tiles.  The second
"<code>magick montage</code>" then simply contatanates the columns into 'page' images
without adding any more space between columns. </P>

If you only want a single image of a variable number of columns, then you can
replace the second "<code>magick montage</code>" with a "<code>magick</code>" to
concatanate without adding extra space of 'pages'. For example...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE RANDOM>
  magick montage font_*.gif  -tile 1x3  -geometry 16x16+1+1  miff:- |\
    magick - +append montage_columns_2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="montage_columns_2.gif"
     ><IMG SRC="montage_columns_2.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]" ></A>
</TD></TR></TABLE></P>


<A NAME="overlap"></A>
<H3>Overlapped Montage Tiles</H3>

In the <A HREF="forum_link.cgi?f=1" >IM User Forum</A>, during a discussion
between, <A HREF="http://www.fmwconcepts.com/fmw/fmw.html" >Fred Weinhaus</A>
, aka <I><A HREF="../forum_link.cgi?u=9098" >fmw42</A></I> and another user
<I><A HREF="../forum_link.cgi?u=10889" >pooco</A></I>, it was discovered that
if you set the inter-tile space (set in the "<CODE><A
HREF="../option_link.cgi?geometry" >-geometry</A></CODE>" setting) to
a negative number you can actually overlap the tiled areas into which the
images are drawn. </P>

For example, here we use a negative horizontal inter-tile spacing, for a
single row of images.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage null:   font_*.gif   null: \
          -tile x1 -geometry -5+2  montage_overlap.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_overlap.jpg"
     ><IMG SRC="montage_overlap.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Rotating the images will make the overlapping series even more interesting...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage null: font_*.gif null: -background none -rotate 30 \
          -background white -tile x1 -geometry -8+2  montage_rot_overlap.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_rot_overlap.jpg"
     ><IMG SRC="montage_rot_overlap.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Note that I needed to add a special "<CODE>null:</CODE>", spacing image
at the start and end of the row of images so the images do not overflow the
canvas, "<code>magick montage</code>" calculates and generates. </P>

This presents us with some interesting possibilities. For example you could
generate a very interesting row of overlapping thumbnails, by making use of
the randomly rotated <A HREF="../transform/#polaroid" >Polaroid Transform</A>.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE RANDOM>
  magick montage -size 400x400 null: ../img_photos/[a-m]*_orig.* null: \
          -auto-orient  -thumbnail 200x200 \
          -bordercolor Lavender -background black +polaroid -resize 30% \
          -gravity center -background none -extent 80x80 \
          -background SkyBlue -geometry -10+2  -tile x1  polaroid_overlap.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="polaroid_overlap.jpg"
     ><IMG SRC="polaroid_overlap.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

The use of <A HREF="../crop/#extent" >extent</A> in the above is used to
remove the randomness of image size that "<CODE><A
HREF="../option_link.cgi?+polaroid" >+polaroid</A></CODE>" can produce on
different 'runs', giving more control of the final spacing and overlap between
images. </P>

This is a very interesting result, though it should actually be classed as a
BUG, as this is not the intended purpose of "<code>magick montage</code>".  I also
would not expect any HTML image mapping to work correctly, without some
fixing by the user. </P>

However a more complex, and user controllable solution for overlapping images
is demonstrated using a scripted form of <A HREF="../layers/#merge" >Layer
Merging</A>, which is the recommended and more logical solution. See examples
in <A HREF="../layers/#example" >Programmed Positioning of Layered Images</A>.
</P>


<A NAME="concatenate"></A>
<H3>Montage Concatenation Mode</H3>

As you saw, montage has a special concatenation mode, which can be used to
join images together without any extra spaces just like the "<CODE><A
HREF="../option_link.cgi?append" >-append</A></CODE>" option.  I do however
recommend you set the "<CODE><A HREF="../option_link.cgi?tile"
>-tile</A></CODE>" option appropriately, so as to direct the appending either
horizontally, vertically or in an array. </P>

For example here we use a "<CODE>-tile x1</CODE>" to append images
horizontally.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -mode Concatenate  -tile x1  montage_cat.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_cat.jpg"
     ><IMG SRC="montage_cat.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

But you can also use it to just as easily create an array of images.
Preferably, the images are the same size, so they fit together properly.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage balloon.gif medical.gif present.gif shading.gif \
          -mode Concatenate  -tile 2x2  montage_array.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_array.jpg"
     ><IMG SRC="montage_array.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

When concatenating images of different sizes, the images are concatenated with
'top' vertical alignment, then 'left' horizontal row alignment.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage medical.gif rose:      present.gif shading.gif \
          granite:    balloon.gif netscape:   recycle.gif \
          -mode Concatenate  -tile 4x  montage_cat2.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_cat2.jpg"
     ><IMG SRC="montage_cat2.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

However vertical alignment goes weird when framing is also added.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage medical.gif rose:      present.gif shading.gif \
          granite:    balloon.gif netscape:   recycle.gif \
          -mode Concatenate  -tile 4x  -frame 5  montage_cat3.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_cat3.jpg"
     ><IMG SRC="montage_cat3.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Of course, framing is not really part concatenate mode, so if "<CODE><A
HREF="../option_link.cgi?frame" >-frame</A></CODE>" is set before the
"<CODE><A HREF="../option_link.cgi?mode" >-mode</A></CODE>" setting, it will
be turned off. As such this quirk is not likely to be seen, except by mistake
when you accidentally use a 'zero geometry' (see below). </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Montage Concatenation to the 'HTML' image indexing format, produces
  incorrect image maps.  Basically the resulting image map will be as if
  the generated montage was a true equally divided 'array' of images,
  rather than a concatenation of the images in line.  In other words it is
  wrong for lines of 'short' images.
</I></FONT></TD></TR></TABLE></P>

<A NAME="zero_geometry"></A>
<H3>Zero Geometry, <FONT SIZE=-1>caution required</FONT></H3>

With only "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>" spacing values (no image resizing specified), all
montages image frames are set to the same size, so that both the widest and
tallest image will fit, without being resized.  </P>

This is itself an useful behaviour...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage present.gif rose: shading.gif \
          -frame 5  -geometry +1+1   montage_geom_1.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom_1.jpg"
     ><IMG SRC="montage_geom_1.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

However a 1 pixel gap was left around and between the image frames. </P>

But if you try to remove those gaps with a position of "<CODE>+0+0</CODE>",
you run into a very unusual problem...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage present.gif rose: shading.gif \
          -tile x1  -frame 5  -geometry +0+0  montage_geom_0.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom_0.jpg"
     ><IMG SRC="montage_geom_0.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

The 'zero geometry' you specified (that is "<CODE>-geometry 0x0+0+0</CODE>" ),
has the extra effect of putting montage in a 'concatenation' mode (see above),
which is NOT what we were after in the above. </P>

For single images it also does not matter if we use a zero "<CODE><A
HREF="../option_link.cgi?append" >-append</A></CODE>" (and thus concatenation
mode). The desired result is what we want, no extra borders.  As such a
"<CODE>-geometry +0+0</CODE>" is fine if you are only using
"<code>magick montage</code>" to <A HREF="../annotating/#labeling" >add a label to an
image</A>. </P>

The concatenation mode will however not be invoked if you specify a non-zero
geometry 'size' for your images, even though you used a zero offset. This in
turn gives us a tricky solution to our original problem. </P>

What we do a set a geometry image size of "<CODE>1x1</CODE>" but also tell IM,
never to shrink images (using a "<CODE>&lt;</CODE>" character) to this size!
In other words, never resize an image ever, just use a zero offset, in a
non-zero geometry argument.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage present.gif rose: shading.gif \
          -frame 5  -geometry '1x1+0+0&lt;'  montage_geom_1x1.jpg
</samp></pre></TD></TR></TABLE>
  <A HREF="montage_geom_1x1.jpg"
     ><IMG SRC="montage_geom_1x1.jpg"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

This brings up another good rule of thumb... </P>

<DIV ALIGN=center><B>
           Always set a non-zero geometry when using montage
</B></DIV> </P>

Even if it is only the 'fake' geometry such as I used above. </P>


<A NAME="bg"></A>
<H3>Background and Transparency Handling</H3>

By default images are overlaid onto the montage canvas, which is created using
the "<CODE><A HREF="../option_link.cgi?background" >-background</A></CODE>"
color setting, as you can see here.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  \( recycle.gif -set label recycle \)  medical.gif \
          -tile x1  -geometry +5+5  -background lightblue   bg_lightblue.gif
</samp></pre></TD></TR></TABLE>
</TD><TD>
  <A HREF="bg_lightblue.gif"
     ><IMG SRC="bg_lightblue.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Instead of a solid color, you can instead use "<CODE><A
HREF="../option_link.cgi?texture" >-texture</A></CODE>" to define a tile image
to use instead of the "<CODE><A HREF="../option_link.cgi?background"
>-background</A></CODE>" color.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  \( recycle.gif -set label recycle \)  medical.gif \
          -tile x1  -geometry +5+5   -texture bg.gif      bg_texture.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_texture.gif"
     ><IMG SRC="bg_texture.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Adding frames (which add extra border space into the tiles) just adds more
drawn 'fluff' on top of the background canvas.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  \( recycle.gif -set label recycle \)  medical.gif \
          -tile x1  -frame 5  -geometry '40x40+5+5>' \
          -bordercolor lightblue  -texture bg.gif  bg_frame.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_frame.gif"
     ><IMG SRC="bg_frame.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note that when framed, the "<CODE><A HREF="../option_link.cgi?bordercolor"
>-bordercolor</A></CODE>" setting will be used to fill in the inside the
frame, effectively becoming the background color of the image. Also
notice that any transparent areas of the image are also set to this color.
</P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Before version 6.1.4 of IM, what was seen in the transparent areas of
  images was undefined.  In some versions you would see through the framed
  image to the background color or texture. On others you might get black,
  or white. In still other versions you would be able to see though all the
  layers and the final image would be transparent where the original image
  was transparent.   Upgrade NOW if this is a problem for you. </P>
</I></FONT></TD></TR></TABLE></P>

Also new to IM version 6.1.4 is the ability to use a special 1 pixel wide
frame.  This will basically remove the frame around the image cells
completely, but retaining the internal "<CODE><A
HREF="../option_link.cgi?bordercolor" >-bordercolor</A></CODE>" padding around
(and underneath) the image.  For example compare a frame of '<CODE>1</CODE>'
with the minimal frame width of '<CODE>2</CODE>'.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_1.gif  \( recycle.gif -set label recycle \)  medical.gif \
          -tile x1  -frame 1  -geometry '40x40+5+5>' \
          -bordercolor lightblue  -texture bg.gif  bg_frame_1.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_frame_1.gif"
     ><IMG SRC="bg_frame_1.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>

<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_2.gif  \( recycle.gif -set label recycle \)  medical.gif \
          -tile x1  -frame 2  -geometry '40x40+5+5>' \
          -bordercolor lightblue  -texture bg.gif  bg_frame_2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_frame_2.gif"
     ><IMG SRC="bg_frame_2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

<!--  It broke again - and I am thru complaining of this

Also resolved at this time was the ability to use the various <A
HREF="../compose/#compose" >Alpha Composition</A> methods to determine just
how an image, (with or without transparent areas) is handled by montage, and a
"<CODE><A HREF="../option_link.cgi?frame" >-frame</A></CODE>" is used with the
image. As usual the last "<CODE><A HREF="../option_link.cgi?compose"
>-compose</A></CODE>" setting defined in "<code>magick montage</code>", specifies how
the image is overlaid onto the framing background of the image cell. </P>

For example, lets use '<CODE><A HREF="../compose/#copy" >Copy</A></CODE>" to
preserve the images transparency when it is framed, allowing the montage
canvas to show through.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif   -alpha set \
          -tile x1 -frame 5 -geometry '40x40+5+5>' -bordercolor LimeGreen \
          -compose copy  -texture bg.gif   bg_compose_copy.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_compose_copy.gif"
     ><IMG SRC="bg_compose_copy.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Other interesting combinations include using '<CODE><A
HREF="../compose/#dstout" >DstOut</A><CODE>'...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif   -alpha set \
          -tile x1 -frame 5 -geometry '40x40+5+5>' -bordercolor LimeGreen \
          -compose DstOut  -texture bg.gif   bg_compose_dstout.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_compose_dstout.gif"
     ><IMG SRC="bg_compose_dstout.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Or its inverse '<CODE><A HREF="../compose/#dstout" >DstIn</A><CODE>'...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif   -alpha set \
          -tile x1 -frame 5 -geometry '40x40+5+5>' -bordercolor LimeGreen \
          -compose DstIn  -texture bg.gif   bg_compose_dstin.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_compose_dstin.gif"
     ><IMG SRC="bg_compose_dstin.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

For more examples of using the "<CODE><A HREF="../option_link.cgi?compose"
>-compose</A></CODE>" setting with "<CODE><A HREF="../option_link.cgi?frame"
>-frame</A></CODE>", see the <A HREF="../crop/#frame_compose" >Frame
Compose</A> examples. </P>

-->

But what if you want your montage to have a transparent background?
Particularly, if you plan to use it on a web page containing a texture mapping.
</P>

Simple, just use a "<CODE><A HREF="../option_link.cgi?background"
>-background</A></CODE>" color of '<CODE>None</CODE>' or
'<CODE>Transparent</CODE>', without any  "<CODE><A
HREF="../option_link.cgi?texture" >-texture</A></CODE>" image to override that
setting. </P>

For example here we generated a transparent montage. Note that "<CODE><A
HREF="../option_link.cgi?geometry" >-geometry</A></CODE>" is still used to add
space around and between the images.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif \
          -tile x1  -geometry +2+2  -background none   bg_none.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_none.gif"
     ><IMG SRC="bg_none.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Of course if you also use "<CODE><A HREF="../option_link.cgi?frame"
>-frame</A></CODE>", you need to make the "<CODE><A
HREF="../option_link.cgi?bordercolor" >-bordercolor</A></CODE>" transparent
too.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif \
          -tile x1 -frame 5 -geometry '40x40+5+5>' \
          -bordercolor none  -background none    bg_framed_trans.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_framed_trans.gif"
     ><IMG SRC="bg_framed_trans.gif"
           ALIGN=middle VSPACE=2 HSPACE=2 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note that the montage "<A HREF="../option_link.cgi?shadow"
><CODE>-shadow</CODE></A>" option is completely unaffected by all the above.
it is applied according to the final transparent shape of the cells, before
it is overlaid onto the background color or texture.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif \
          -tile x1  -shadow  -geometry '40x40+5+5>' \
          -texture bg.gif  bg_shadow.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_shadow.gif"
     ><IMG SRC="bg_shadow.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick montage font_9.gif  recycle.gif  medical.gif \
          -tile x1 -frame 5 -shadow  -geometry '40x40+5+5>' \
          -bordercolor none   -texture bg.gif  bg_shadow_framed.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="bg_shadow_framed.gif"
     ><IMG SRC="bg_shadow_framed.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

<BR><BR><BR>

Any suggestions, ideas, or other examples of using "<code>magick montage</code>" are
of course always welcome. The same goes for anything in these example pages.
</P>

<HR><!-- ---------------------------------------------------------------- -->

<PRE>
Montage Image Output Size

The mathematics of montage is straight forward...

Basically the montage width should be....
  (geometry_size + 2*frame_size + 2*geometry_offset) * images_per_column

That is each 'cell' of montage has a fixed sized frame and spacing (border)
added around it before the cells are appended together.

In essence the size of montage is also a multiple of the tile size, which can
make it easy to break up montage, or re-arrange the 'cells', if so desired,
as they are simple fixed sized tiles in a rectangular array.

The height is similar but with tha additional spacing needed for labels and
the optional montage title, both of which are much more difficult to
calculate, as they depend heavilly on text, font, pointsize, and density
settings.

There is also an effect of adding a shadow to the montage in this calculation,
but that appears to be a simple small fixed addition to the bototm and right
edges.  It does not appear to effect the tile size used.

</PRE>

<HR><!-- ---------------------------------------------------------------- -->
</div></main><footer class="magick-footer"><div class="container-fluid">
Created: 3 January 2004 <BR>
Updated: 27 December 2009 <BR>
Author: <A HREF="https://antofthy.gitlab.io/anthony.html"
        >Anthony Thyssen</A>, &lt;Anthony.Thyssen&#64;gmail.com&gt;<BR>
Examples Generated with:
        <IMG SRC="version.gif" ALIGN=absmiddle ALT="[version image]"><BR>
URL: <CODE>https://imagemagick.org/Usage/montage/</CODE>
</div></footer></body></HTML>
